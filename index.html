<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuraChat | AI Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Variables for Theme Switching */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --background-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --user-message-bg: #e3f2fd;
            --ai-message-bg: #f5f5f5;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --border-radius: 12px;
            --transition-speed: 0.3s;
        }

        .dark-mode {
            --primary-color: #4cc9f0;
            --secondary-color: #4361ee;
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --text-primary: #f8f9fa;
            --text-secondary: #adb5bd;
            --border-color: #424242;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --user-message-bg: #1e3a5f;
            --ai-message-bg: #2d2d2d;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            transition: background-color var(--transition-speed), color var(--transition-speed);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 1.5rem;
            background-color: var(--surface-color);
            box-shadow: 0 4px 12px var(--shadow-color);
            z-index: 10;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            color: var(--primary-color);
            font-size: 1.75rem;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .tagline {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 0.125rem;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            border-radius: 30px;
            background: var(--border-color);
            cursor: pointer;
            transition: background var(--transition-speed);
            border: none;
            outline: none;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            background: var(--surface-color);
            border-radius: 50%;
            transition: transform var(--transition-speed);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-icon {
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .dark-mode .toggle-slider {
            transform: translateX(30px);
        }

        /* Clear Chat Button */
        .clear-btn {
            background-color: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .clear-btn:hover {
            background-color: var(--warning-color);
            color: white;
            border-color: var(--warning-color);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            padding: 1.5rem;
            overflow: hidden;
        }

        /* Messages Area */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            scroll-behavior: smooth;
        }

        /* Hide scrollbar but keep functionality */
        .messages-container::-webkit-scrollbar {
            width: 6px;
        }

        .messages-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages-container::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 10px;
        }

        /* Message Bubbles */
        .message {
            max-width: 85%;
            padding: 1rem 1.25rem;
            border-radius: var(--border-radius);
            animation: fadeInUp 0.4s ease-out;
            position: relative;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--user-message-bg);
            border-bottom-right-radius: 4px;
            color: var(--text-primary);
        }

        .ai-message {
            align-self: flex-start;
            background-color: var(--ai-message-bg);
            border-bottom-left-radius: 4px;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .user-icon, .ai-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .user-icon {
            background-color: var(--primary-color);
            color: white;
        }

        .ai-icon {
            background-color: var(--secondary-color);
            color: white;
        }

        .message-sender {
            font-weight: 600;
            color: var(--text-primary);
        }

        .message-time {
            color: var(--text-secondary);
            font-size: 0.75rem;
        }

        .message-content {
            font-size: 1rem;
        }

        /* Typing Indicator */
        .typing-indicator {
            align-self: flex-start;
            background-color: var(--ai-message-bg);
            border-radius: var(--border-radius);
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom-left-radius: 4px;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-secondary);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        /* Input Area */
        .input-container {
            display: flex;
            gap: 0.75rem;
            padding: 1rem;
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 16px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .message-input {
            flex: 1;
            padding: 0.875rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--background-color);
            color: var(--text-primary);
            transition: border-color var(--transition-speed);
            resize: none;
            max-height: 120px;
            min-height: 56px;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color var(--transition-speed);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .send-btn:hover {
            background-color: var(--secondary-color);
        }

        .send-btn:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
        }

        /* Footer */
        .app-footer {
            text-align: center;
            padding: 1.25rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            border-top: 1px solid var(--border-color);
            margin-top: 1rem;
        }

        .footer-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 0.5rem;
        }

        .memory-status {
            color: var(--success-color);
            font-weight: 600;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-6px);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-header {
                padding: 1rem;
                flex-wrap: wrap;
            }
            
            .logo-container {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .header-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .chat-container {
                padding: 1rem;
            }
            
            .message {
                max-width: 95%;
            }
            
            .input-container {
                flex-direction: column;
            }
            
            .send-btn {
                padding: 0.75rem;
            }
            
            .footer-info {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .logo-text {
                font-size: 1.25rem;
            }
            
            .tagline {
                font-size: 0.75rem;
            }
            
            .message {
                padding: 0.75rem 1rem;
            }
            
            .message-content {
                font-size: 0.95rem;
            }
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
            padding: 2rem;
        }

        .empty-icon {
            font-size: 3.5rem;
            color: var(--border-color);
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .tagline strong {
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="app-header">
        <div class="logo-container">
            <i class="fas fa-brain logo-icon"></i>
            <div>
                <div class="logo-text">NeuraChat</div>
                <div class="tagline">Your <strong><code>open-source</code></strong> personal AI assistant</div>
            </div>
        </div>
        
        <div class="header-controls">
            <button class="clear-btn" id="clearChatBtn">
                <i class="fas fa-trash-alt"></i>
                <span>Clear Chat</span>
            </button>
            <button class="theme-toggle" id="themeToggle">
                <div class="toggle-slider">
                    <i class="fas fa-moon toggle-icon"></i>
                </div>
            </button>
        </div>
    </header>

    <!-- Main Chat Container -->
    <main class="chat-container">
        <!-- Messages Container -->
        <div class="messages-container" id="messagesContainer">
            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <i class="fas fa-comments empty-icon"></i>
                <h3>Start a conversation</h3>
                <p>Send a message to begin chatting with your AI assistant.</p>
                <p>Try asking about technology, science, or general knowledge.</p>
            </div>
            
            <!-- Messages will be inserted here by JavaScript -->
        </div>

        <!-- Typing Indicator (Hidden by Default) -->
        <div class="typing-indicator" id="typingIndicator" style="display: none;">
            <div class="ai-icon">
                <i class="fas fa-robot"></i>
            </div>
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="input-container">
            <textarea 
                class="message-input" 
                id="messageInput" 
                placeholder="Type your message here..." 
                rows="1"
            ></textarea>
            <button class="send-btn" id="sendButton">
                <i class="fas fa-paper-plane"></i>
                <span>Send</span>
            </button>
        </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
        <div>NeuraChat v1.0 | Browser-based AI Assistant</div>
        <div class="footer-info">
            <span>All data is stored locally in your browser</span>
            <span class="memory-status">Memory: <span id="memoryStatus">Optimized</span></span>
        </div>
    </footer>

    <script>
        // Main Application Object
        const NeuraChat = {
            // Configuration
            config: {
                storageKey: 'neurachat_conversations',
                maxMessages: 100, // Limit to prevent memory issues
                typingDelay: 800, // Simulate AI thinking time (ms)
                aiName: 'Neura Assistant',
                userName: 'You'
            },
            
            // State
            state: {
                messages: [],
                isDarkMode: false,
                isTyping: false
            },
            
            // Initialize the application
            init: function() {
                this.loadState();
                this.setupEventListeners();
                this.renderMessages();
                this.updateMemoryStatus();
                
                // Set focus to input field
                document.getElementById('messageInput').focus();
            },
            
            // Load saved state from localStorage
            loadState: function() {
                // Load theme preference
                const savedTheme = localStorage.getItem('neurachat_theme');
                this.state.isDarkMode = savedTheme === 'dark';
                
                // Apply theme
                if (this.state.isDarkMode) {
                    document.body.classList.add('dark-mode');
                }
                
                // Load messages
                const savedMessages = localStorage.getItem(this.config.storageKey);
                if (savedMessages) {
                    try {
                        this.state.messages = JSON.parse(savedMessages);
                    } catch (e) {
                        console.error('Failed to parse saved messages:', e);
                        this.state.messages = [];
                    }
                }
            },
            
            // Save state to localStorage
            saveState: function() {
                // Save theme preference
                localStorage.setItem('neurachat_theme', this.state.isDarkMode ? 'dark' : 'light');
                
                // Save messages (limit to maxMessages)
                const messagesToSave = this.state.messages.slice(-this.config.maxMessages);
                localStorage.setItem(this.config.storageKey, JSON.stringify(messagesToSave));
                
                // Update memory status
                this.updateMemoryStatus();
            },
            
            // Set up event listeners
            setupEventListeners: function() {
                const self = this;
                
                // Send button click
                document.getElementById('sendButton').addEventListener('click', function() {
                    self.sendMessage();
                });
                
                // Input field enter key press
                document.getElementById('messageInput').addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        self.sendMessage();
                    }
                    
                    // Auto-resize textarea
                    setTimeout(() => {
                        this.style.height = 'auto';
                        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                    }, 0);
                });
                
                // Clear chat button
                document.getElementById('clearChatBtn').addEventListener('click', function() {
                    self.clearChat();
                });
                
                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', function() {
                    self.toggleTheme();
                });
            },
            
            // Send a new message
            sendMessage: function() {
                const inputField = document.getElementById('messageInput');
                const messageText = inputField.value.trim();
                
                if (!messageText || this.state.isTyping) return;
                
                // Create user message
                const userMessage = {
                    id: Date.now(),
                    sender: 'user',
                    content: messageText,
                    timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                };
                
                // Add to messages and render
                this.state.messages.push(userMessage);
                this.renderMessages();
                
                // Clear input field and reset height
                inputField.value = '';
                inputField.style.height = 'auto';
                
                // Save state
                this.saveState();
                
                // Simulate AI response after a delay
                this.simulateAIResponse(messageText);
            },
            
            // Simulate AI response
            simulateAIResponse: function(userMessage) {
                const self = this;
                
                // Show typing indicator
                this.state.isTyping = true;
                document.getElementById('typingIndicator').style.display = 'flex';
                
                // Scroll to bottom
                this.scrollToBottom();
                
                // Simulate thinking delay
                setTimeout(function() {
                    // Hide typing indicator
                    self.state.isTyping = false;
                    document.getElementById('typingIndicator').style.display = 'none';
                    
                    // Generate AI response
                    const aiResponse = self.generateAIResponse(userMessage);
                    
                    // Create AI message object
                    const aiMessage = {
                        id: Date.now() + 1,
                        sender: 'ai',
                        content: aiResponse,
                        timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                    };
                    
                    // Add to messages and render
                    self.state.messages.push(aiMessage);
                    self.renderMessages();
                    
                    // Save state
                    self.saveState();
                }, this.config.typingDelay);
            },
            
            // Generate AI response based on user input
            generateAIResponse: function(userMessage) {
                // Convert to lowercase for easier matching
                const message = userMessage.toLowerCase();
                
                // Predefined responses for common topics
                const responses = {
                    greeting: [
                        "Hello! I'm Neura, your AI assistant. How can I help you today?",
                        "Hi there! I'm here to assist you with any questions you might have.",
                        "Greetings! I'm ready to help you explore ideas and answer questions."
                    ],
                    technology: [
                        "Technology is evolving at an incredible pace. AI, quantum computing, and biotechnology are pushing the boundaries of what's possible.",
                        "The current trends in technology include edge computing, AI democratization, and sustainable tech solutions.",
                        "Technology should aim to solve human problems while being mindful of ethical considerations and accessibility."
                    ],
                    science: [
                        "Science helps us understand the universe from quantum particles to galactic superclusters.",
                        "Recent scientific breakthroughs include CRISPR gene editing, gravitational wave detection, and advancements in fusion energy.",
                        "The scientific method remains our most reliable tool for discovering truth about the natural world."
                    ],
                    help: [
                        "I can help with explanations, brainstorming, answering questions, and discussing various topics.",
                        "You can ask me about technology, science, general knowledge, or request help with problem-solving.",
                        "Try asking specific questions or request explanations on topics you're curious about."
                    ],
                    default: [
                        "That's an interesting point. Could you tell me more about what you're thinking?",
                        "I understand. Let me think about that for a moment...",
                        "Thanks for sharing. From my perspective, this topic raises several interesting considerations.",
                        "I'd be happy to explore that idea with you. What aspect are you most curious about?",
                        "That's a thoughtful question. Let me provide some insights based on available information."
                    ]
                };
                
                // Determine which category the message falls into
                let category = 'default';
                
                if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                    category = 'greeting';
                } else if (message.includes('tech') || message.includes('computer') || message.includes('ai') || message.includes('software')) {
                    category = 'technology';
                } else if (message.includes('science') || message.includes('physics') || message.includes('biology') || message.includes('chemistry')) {
                    category = 'science';
                } else if (message.includes('help') || message.includes('what can you do') || message.includes('capabilities')) {
                    category = 'help';
                }
                
                // Select a random response from the appropriate category
                const categoryResponses = responses[category];
                const randomIndex = Math.floor(Math.random() * categoryResponses.length);
                
                return categoryResponses[randomIndex];
            },
            
            // Render all messages
            renderMessages: function() {
                const messagesContainer = document.getElementById('messagesContainer');
                const emptyState = document.getElementById('emptyState');
                
                // Show/hide empty state
                if (this.state.messages.length === 0) {
                    emptyState.style.display = 'flex';
                    messagesContainer.innerHTML = '<div class="empty-state" id="emptyState"><i class="fas fa-comments empty-icon"></i><h3>Start a conversation</h3><p>Send a message to begin chatting with your AI assistant.</p><p>Try asking about technology, science, or general knowledge.</p></div>';
                    return;
                } else {
                    emptyState.style.display = 'none';
                }
                
                // Clear container
                messagesContainer.innerHTML = '';
                
                // Render each message
                this.state.messages.forEach(message => {
                    const messageElement = this.createMessageElement(message);
                    messagesContainer.appendChild(messageElement);
                });
                
                // Scroll to bottom
                this.scrollToBottom();
            },
            
            // Create a message element
            createMessageElement: function(message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender}-message`;
                
                // Determine sender info
                const senderName = message.sender === 'user' ? this.config.userName : this.config.aiName;
                const senderIcon = message.sender === 'user' ? 'fas fa-user' : 'fas fa-robot';
                
                // Create message HTML
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <div class="${message.sender}-icon">
                            <i class="${senderIcon}"></i>
                        </div>
                        <div class="message-sender">${senderName}</div>
                        <div class="message-time">${message.timestamp}</div>
                    </div>
                    <div class="message-content">${this.formatMessageContent(message.content)}</div>
                `;
                
                return messageDiv;
            },
            
            // Format message content (basic formatting)
            formatMessageContent: function(content) {
                // Convert line breaks to <br> tags
                return content.replace(/\n/g, '<br>');
            },
            
            // Clear all chat messages
            clearChat: function() {
                if (this.state.messages.length === 0) return;
                
                if (confirm('Are you sure you want to clear all messages? This cannot be undone.')) {
                    this.state.messages = [];
                    localStorage.removeItem(this.config.storageKey);
                    this.renderMessages();
                    this.updateMemoryStatus();
                    
                    // Show confirmation message
                    this.showNotification('Chat cleared successfully');
                }
            },
            
            // Toggle dark/light theme
            toggleTheme: function() {
                this.state.isDarkMode = !this.state.isDarkMode;
                document.body.classList.toggle('dark-mode', this.state.isDarkMode);
                this.saveState();
                
                // Update toggle button icon
                const toggleIcon = document.querySelector('.toggle-icon');
                toggleIcon.className = this.state.isDarkMode ? 'fas fa-sun toggle-icon' : 'fas fa-moon toggle-icon';
            },
            
            // Scroll to bottom of messages
            scrollToBottom: function() {
                const messagesContainer = document.getElementById('messagesContainer');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            },
            
            // Update memory status display
            updateMemoryStatus: function() {
                const statusElement = document.getElementById('memoryStatus');
                const messageCount = this.state.messages.length;
                
                if (messageCount === 0) {
                    statusElement.textContent = 'Empty';
                    statusElement.style.color = 'var(--text-secondary)';
                } else if (messageCount < 20) {
                    statusElement.textContent = 'Optimized';
                    statusElement.style.color = 'var(--success-color)';
                } else if (messageCount < 50) {
                    statusElement.textContent = 'Moderate';
                    statusElement.style.color = 'orange';
                } else {
                    statusElement.textContent = 'High';
                    statusElement.style.color = 'var(--warning-color)';
                }
            },
            
            // Show a temporary notification
            showNotification: function(message) {
                // Create notification element
                const notification = document.createElement('div');
                notification.textContent = message;
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: var(--primary-color);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    z-index: 1000;
                    animation: fadeInUp 0.3s ease-out;
                    max-width: 300px;
                `;
                
                // Add to body
                document.body.appendChild(notification);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transition = 'opacity 0.3s';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
        };
        
        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', function() {
            NeuraChat.init();
        });
    </script>
</body>
</html>